# ü§ñ AURORA CYBER INTEL HUB - Deployment Guide
## NSA-Grade Autonomous Investigation Platform - OFFLINE FIRST

---

## üîí **FILOSOFIA OFFLINE-FIRST**

**ZERO TRUST em APIs externas** - Todo o sistema foi projetado para funcionar 100% offline.

### **Por que Offline-First?**
- ‚úÖ **Privacidade**: Seus dados nunca saem do seu servidor
- ‚úÖ **Velocidade**: An√°lise instant√¢nea sem rate limits
- ‚úÖ **Confiabilidade**: Funciona mesmo sem internet
- ‚úÖ **Custo zero**: N√£o precisa de API keys
- ‚úÖ **Sem depend√™ncias**: N√£o confia em servi√ßos de terceiros

### **Modo H√≠brido (Opcional)**
Se voc√™ quiser complementar a an√°lise offline com APIs externas:
- Configure `USE_EXTERNAL_APIS=true` no `.env`
- Adicione suas API keys
- O sistema usa: 60% offline + 40% APIs externas

---

## üìã **O QUE FOI IMPLEMENTADO**

### **Frontend (React)**
‚úÖ **AuroraCyberHub.jsx** - Interface de orquestra√ß√£o com:
- 4 tipos de investiga√ß√£o (Auto, Defensiva, Ofensiva, Completa)
- Timeline de execu√ß√£o em tempo real
- Status de 8+ servi√ßos
- Relat√≥rio final automatizado
- UI moderna com gradientes roxo/cyan

### **Backend Services (FastAPI) - OFFLINE FIRST**

#### 1. **Threat Intelligence Aggregator** (Port 8013) - OFFLINE FIRST ‚ö°
- **An√°lise Offline (Prim√°ria)**:
  - Database SQLite local de IPs/dom√≠nios maliciosos
  - Heur√≠sticas DNS (PTR records, patterns)
  - An√°lise de CIDR ranges
  - Detec√ß√£o de typosquatting/homographs
  - Whitelists de servi√ßos conhecidos (Google, Cloudflare, etc)
  - TLD risk analysis
  - Scan behavior detection
- **APIs Externas (Opcional)**: AbuseIPDB, VirusTotal, GreyNoise, OTX
- **Features**:
  - Threat score agregado (0-100)
  - Detec√ß√£o autom√°tica de tipo de target
  - Reputa√ß√£o cross-referenciada
  - Recommendations baseadas em an√°lise local + APIs (se habilitadas)

#### 2. **Malware Analysis Service** (Port 8014) - OFFLINE FIRST ‚ö°
- **An√°lise Offline (Prim√°ria)**:
  - Database SQLite local de hashes maliciosos
  - 30+ padr√µes comportamentais suspeitos
  - An√°lise de entropia (detecta empacotamento/crypto)
  - Detec√ß√£o heur√≠stica por extens√£o/nome
  - An√°lise estrutural (PE, ELF headers)
  - Detec√ß√£o de malware families por padr√µes
  - Sistema de scoring multi-dimensional
- **APIs Externas (Opcional)**: VirusTotal, Hybrid Analysis
- **Features**:
  - An√°lise de arquivos (upload)
  - Lookup de hashes (MD5/SHA1/SHA256)
  - An√°lise de URLs (heur√≠sticas locais)
  - Identifica√ß√£o de malware families
  - Database expans√≠vel com novos hashes

#### 3. **SSL/TLS Monitor** (Port 8015)
- **Features** NSA-Grade:
  - An√°lise profunda de certificados
  - Detec√ß√£o de vulnerabilidades (POODLE, BEAST, etc)
  - Compliance check: PCI-DSS, HIPAA, NIST, FIPS-140-2
  - Security score (0-100) e grade (A+ to F)
  - Detec√ß√£o de MitM e certificados suspeitos
  - An√°lise de cipher suites
  - Valida√ß√£o de chain completa

#### 4. **Aurora Orchestrator** (Port 8016) üß†
- **O C√©rebro da Opera√ß√£o**:
  - Decision Engine que decide automaticamente o workflow
  - Detec√ß√£o autom√°tica de tipo de target
  - Orquestra√ß√£o paralela/sequencial inteligente
  - Threat assessment agregado
  - Recommendations baseadas em IA
  - Real-time status tracking

---

## üöÄ **QUICK START**

### **Pr√©-requisitos**
```bash
- Docker & Docker Compose
- Node.js 18+
- Python 3.11+
```

### **1. Clone e Configure**
```bash
cd /home/juan/vertice-dev

# ========================================
# MODO OFFLINE (DEFAULT - RECOMENDADO) ‚úÖ
# ========================================
# N√£o precisa configurar nada! O sistema j√° funciona 100% offline.

# ========================================
# MODO H√çBRIDO (OPCIONAL)
# ========================================
# Se voc√™ quiser complementar com APIs externas:
# 1. Copie o arquivo de exemplo
cp backend/services/threat_intel_service/.env.example backend/services/threat_intel_service/.env

# 2. Edite o .env e adicione:
# USE_EXTERNAL_APIS=true
# ABUSEIPDB_API_KEY=your_key
# VIRUSTOTAL_API_KEY=your_key
# GREYNOISE_API_KEY=your_key
# OTX_API_KEY=your_key
```

### **2. Start Backend (Docker)**
```bash
# Build e start todos os servi√ßos
docker-compose up -d api_gateway threat_intel_service malware_analysis_service ssl_monitor_service aurora_orchestrator_service

# Verificar logs
docker-compose logs -f aurora_orchestrator_service
```

### **3. Start Frontend**
```bash
cd frontend
npm run dev
```

### **4. Acessar**
```
Frontend: http://localhost:5173
API Gateway: http://localhost:8000
Aurora Orchestrator: http://localhost:8016
```

---

## üéØ **COMO USAR**

### **Via Interface (Recomendado)**

1. **Acesse o Cyber Dashboard**
   - Navegue para: `Cyber Security Module`

2. **Clique em "AURORA AI HUB"** (bot√£o roxo com ‚ú®)

3. **Configure a Investiga√ß√£o**:
   - **Target**: IP, Domain, URL, Hash
   - **Tipo de Investiga√ß√£o**:
     - `Aurora Autom√°tico`: IA decide tudo
     - `An√°lise Defensiva`: Threat intel focus
     - `Red Team`: Offensive scanning (requer auth)
     - `Investiga√ß√£o Completa`: Todos os servi√ßos

4. **Iniciar**: Clique em "INICIAR INVESTIGA√á√ÉO"

5. **Acompanhe em Tempo Real**:
   - Timeline mostra cada step
   - Services status atualiza em tempo real
   - Threat assessment ao final

### **Via API Direta**

#### **Start Investigation**
```bash
curl -X POST http://localhost:8016/api/aurora/investigate \
  -H "Content-Type: application/json" \
  -d '{
    "target": "8.8.8.8",
    "investigation_type": "auto",
    "priority": 5,
    "stealth_mode": false,
    "deep_analysis": true
  }'
```

#### **Get Status**
```bash
curl http://localhost:8016/api/aurora/investigation/AURORA-20240929-123456
```

#### **List Services**
```bash
curl http://localhost:8016/api/aurora/services
```

---

## üìä **SERVICE PORTS**

| Service | Port | Description |
|---------|------|-------------|
| API Gateway | 8000 | Unified entry point |
| IP Intelligence | 8002 | Geolocation & ASN |
| Threat Intel Aggregator | 8013 | Multi-source threat intel |
| Malware Analysis | 8014 | File/Hash/URL analysis |
| SSL/TLS Monitor | 8015 | Certificate analysis |
| Aurora Orchestrator | 8016 | AI Brain üß† |
| Nmap Scanner | 8010 | Port scanning |
| Vuln Scanner | 8011 | Vulnerability detection |
| Social Eng | 8012 | Phishing campaigns |

---

## üîê **API KEYS - OPCIONAL (Modo H√≠brido)**

### **‚ö†Ô∏è IMPORTANTE: API Keys s√£o OPCIONAIS**
O sistema funciona 100% sem nenhuma API key usando an√°lise offline.

**Se voc√™ quiser habilitar modo h√≠brido** (offline + APIs externas):

### **VirusTotal** (Opcional)
1. Acesse: https://www.virustotal.com/gui/join-us
2. Crie conta gratuita
3. V√° em: Profile ‚Üí API Key
4. **Limite**: 4 requests/minute (free tier)

### **AbuseIPDB** (Opcional)
1. Acesse: https://www.abuseipdb.com/register
2. Verifique email
3. API Keys ‚Üí Create Key
4. **Limite**: 1000 requests/day (free tier)

### **GreyNoise** (Opcional)
1. Acesse: https://www.greynoise.io/
2. Sign up (Community account √© free)
3. Dashboard ‚Üí API Key
4. **Limite**: 500 requests/day (community)

### **AlienVault OTX** (Opcional)
1. Acesse: https://otx.alienvault.com/
2. Create account
3. Settings ‚Üí OTX Key
4. **Limite**: Generous (free tier)

**Nota**:
- ‚úÖ **Modo Offline (default)**: Funciona sem nenhuma API key
- ‚ö° **Modo H√≠brido**: Requer `USE_EXTERNAL_APIS=true` + API keys

---

## üß™ **TESTING**

### **Test Individual Services**

#### **Threat Intel**
```bash
curl -X POST http://localhost:8013/api/threat-intel/check \
  -H "Content-Type: application/json" \
  -d '{"target": "1.1.1.1", "target_type": "ip"}'
```

#### **Malware Analysis**
```bash
curl -X POST http://localhost:8014/api/malware/analyze-hash \
  -H "Content-Type: application/json" \
  -d '{"hash_value": "44d88612fea8a8f36de82e1278abb02f", "hash_type": "md5"}'
```

#### **SSL Monitor**
```bash
curl -X POST http://localhost:8015/api/ssl/check \
  -H "Content-Type: application/json" \
  -d '{"target": "google.com", "port": 443}'
```

### **Test Aurora Orchestrator**
```bash
# Test IP Investigation
curl -X POST http://localhost:8016/api/aurora/investigate \
  -H "Content-Type: application/json" \
  -d '{
    "target": "8.8.8.8",
    "investigation_type": "defensive",
    "priority": 8
  }'

# Test Domain Investigation
curl -X POST http://localhost:8016/api/aurora/investigate \
  -H "Content-Type: application/json" \
  -d '{
    "target": "google.com",
    "investigation_type": "full",
    "deep_analysis": true
  }'

# Test Hash Lookup
curl -X POST http://localhost:8016/api/aurora/investigate \
  -H "Content-Type: application/json" \
  -d '{
    "target": "44d88612fea8a8f36de82e1278abb02f",
    "investigation_type": "auto"
  }'
```

---

## üìà **MONITORING**

### **Health Checks**
```bash
# Aurora Orchestrator
curl http://localhost:8016/health

# Threat Intel
curl http://localhost:8013/health

# Malware Analysis
curl http://localhost:8014/health

# SSL Monitor
curl http://localhost:8015/health
```

### **Logs**
```bash
# Aurora Orchestrator
docker logs vertice-aurora-orchestrator -f

# Threat Intel
docker logs vertice-threat-intel -f

# Malware Analysis
docker logs vertice-malware-analysis -f

# SSL Monitor
docker logs vertice-ssl-monitor -f
```

---

## üõ°Ô∏è **SECURITY**

### **Rate Limiting**
- Configurado no API Gateway
- Default: 30 requests/minute por IP
- Aurora investigations: 10/minute

### **Authentication**
- Frontend: Session-based
- API: JWT tokens
- Offensive tools: Require special authorization

### **Data Privacy**
- Nenhum target √© persistido por padr√£o
- Logs rotativos a cada 7 dias
- API keys em environment variables apenas

---

## üêõ **TROUBLESHOOTING**

### **Service n√£o inicia**
```bash
# Check logs
docker-compose logs service_name

# Rebuild
docker-compose build service_name --no-cache
docker-compose up -d service_name
```

### **Frontend n√£o conecta ao backend**
```bash
# Verifique se API Gateway est√° rodando
curl http://localhost:8000/

# Verifique CORS no API Gateway
# File: backend/api_gateway/main.py
# Linha ~61: origins = [...]
```

### **Aurora Orchestrator timeout**
```bash
# Aumentar timeout no orchestrator
# File: backend/services/aurora_orchestrator_service/main.py
# Linha ~30: timeout=30.0 (ajustar conforme necess√°rio)
```

---

## üíæ **OFFLINE DATABASES**

### **Como Funciona**
Cada servi√ßo offline mant√©m um database SQLite local:
- `threat_intel.db`: IPs/dom√≠nios maliciosos conhecidos
- `malware.db`: Hashes de malware e padr√µes comportamentais

### **Database Stats**
```bash
# Ver estat√≠sticas do database de malware
curl http://localhost:8014/api/malware/database/stats

# Exemplo de resposta:
{
  "total_malicious_hashes": 1,
  "total_behavior_patterns": 32,
  "total_malware_families": 1,
  "database_path": "malware.db"
}
```

### **Expandindo os Databases**
Voc√™ pode adicionar seus pr√≥prios hashes/IPs conhecidos:

```python
# Adicionar hash malicioso
from offline_malware_engine import OfflineMalwareEngine

engine = OfflineMalwareEngine()
engine.add_malicious_hash(
    hash_value="abc123...",
    hash_type="sha256",
    malware_family="Trojan.Generic",
    severity="high",
    description="Detected in the wild"
)
```

```python
# Adicionar IP malicioso
from offline_engine import OfflineThreatIntel

engine = OfflineThreatIntel()
engine.add_malicious_ip(
    ip="1.2.3.4",
    threat_type="botnet",
    severity="high",
    description="C2 server"
)
```

### **Importar Feeds Externos**
Voc√™ pode criar scripts para importar feeds de threat intelligence:
- AlienVault OTX exports
- Abuse.ch feeds
- Custom threat feeds
- IOC lists de incidentes

---

## üéì **WORKFLOW EXAMPLES**

### **Example 1: IP Investigation (Offline Mode)**
```
Target: 8.8.8.8
Type: Defensive
Mode: Offline First

Aurora Decision:
1. Threat Intel Check (Priority 10) - Offline Engine
2. IP Intelligence Analysis (Priority 9)
3. Nmap Quick Scan (Priority 7)

Results:
- Threat Score: 0/100
- Level: CLEAN
- Source: Local whitelist (Google DNS)
- Confidence: Medium
- Recommendations: ‚úÖ Monitor standard
```

### **Example 2: Domain Investigation**
```
Target: suspicious-site.com
Type: Full

Aurora Decision:
1. Threat Intel Check (Priority 10)
2. SSL Certificate Analysis (Priority 8)
3. Nmap Service Scan (Priority 7)
4. Vulnerability Scanner (Priority 6)

Results:
- Threat Score: 85/100
- Level: CRITICAL
- Recommendations: üö® Block immediately
```

### **Example 3: Malware Hash (Offline Mode)**
```
Target: 44d88612fea8a8f36de82e1278abb02f
Type: Auto
Mode: Offline First

Aurora Decision:
1. Malware Analysis (Priority 10) - Offline Engine

Results:
- Malicious: YES
- Family: EICAR-Test-File
- Source: Local Database
- Threat Score: 100/100
- Confidence: High
- Detection Method: Hash match (MD5)
```

---

## üìö **ARCHITECTURE**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Frontend (React)                ‚îÇ
‚îÇ     Aurora Cyber Intel Hub UI           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       API Gateway (Port 8000)           ‚îÇ
‚îÇ  Rate Limiting ‚îÇ Auth ‚îÇ Routing         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Aurora Orchestrator (Port 8016)       ‚îÇ
‚îÇ        üß† AI Decision Engine            ‚îÇ
‚îÇ   - Target Detection                    ‚îÇ
‚îÇ   - Workflow Planning                   ‚îÇ
‚îÇ   - Threat Assessment                   ‚îÇ
‚îÇ   - Recommendation Generation           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚ñº            ‚ñº          ‚ñº           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇThreat Intel‚îÇ ‚îÇMalware  ‚îÇ  ‚îÇSSL   ‚îÇ  ‚îÇNmap  ‚îÇ
‚îÇ(8013)     ‚îÇ  ‚îÇAnalysis ‚îÇ  ‚îÇMonitor‚îÇ ‚îÇ(8010)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ(8014)   ‚îÇ  ‚îÇ(8015)‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üöÄ **PRODUCTION DEPLOYMENT**

### **Environment Variables**
```bash
# Create .env file
cat > .env << EOF
ABUSEIPDB_API_KEY=your_key_here
VIRUSTOTAL_API_KEY=your_key_here
GREYNOISE_API_KEY=your_key_here
OTX_API_KEY=your_key_here
HYBRID_ANALYSIS_API_KEY=your_key_here

# Database
REDIS_URL=redis://redis:6379

# Security
JWT_SECRET=your_super_secret_key_change_in_production
EOF
```

### **Docker Compose Production**
```bash
# Start all services
docker-compose up -d

# Scale Aurora Orchestrator (if needed)
docker-compose up -d --scale aurora_orchestrator_service=3

# Monitor
docker-compose ps
docker stats
```

### **Reverse Proxy (Nginx)**
```nginx
server {
    listen 443 ssl;
    server_name aurora.yourdomain.com;

    location / {
        proxy_pass http://localhost:5173;
    }

    location /api {
        proxy_pass http://localhost:8000;
    }
}
```

---

## üìû **SUPPORT**

Para d√∫vidas ou problemas:
1. Check logs first: `docker-compose logs -f`
2. Verify API keys are configured
3. Test individual services
4. Check network connectivity

---

## üéØ **NEXT STEPS**

### **Phase 2 - Enhancements**
- [ ] OSINT Integration (Email, Phone, Username)
- [ ] IDS/IPS Detection
- [ ] SIEM Integration
- [ ] Automated Playbooks
- [ ] WebSocket real-time updates
- [ ] Report generation (PDF/JSON)
- [ ] Historical analysis
- [ ] ML-based anomaly detection

### **Phase 3 - Advanced Features**
- [ ] Multi-tenant support
- [ ] Role-based access control
- [ ] Custom workflows
- [ ] API usage analytics
- [ ] Threat intel feeds subscription
- [ ] Integration with MISP
- [ ] Incident response automation

---

## üìÑ **LICENSE**

Projeto V√âRTICE - Internal Use Only
NSA-Grade Classification: Confidential

---

**Built with ‚ù§Ô∏è by Juan Carlos & Claude Code**
**Aurora AI Engine v2.0 - Autonomous Cyber Security Platform**