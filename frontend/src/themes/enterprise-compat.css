/**
 * ═══════════════════════════════════════════════════════════════════════════
 * ENTERPRISE THEME COMPATIBILITY LAYER
 * ═══════════════════════════════════════════════════════════════════════════
 *
 * Fixes layout and styling issues caused by overly broad Enterprise selectors
 * while maintaining professional appearance.
 *
 * PROBLEMA IDENTIFICADO:
 * - Enterprise theme usa selectores muito amplos ([class*="button"], etc.)
 * - Isso quebra layouts de navegação, sidebars, links
 * - Precisamos de regras mais específicas para elementos de layout
 */

/* ═══════════════════════════════════════════════════════════════════════
 * FIX 1: Sidebar/Navigation Links - Preserve Layout
 * ═══════════════════════════════════════════════════════════════════════ */

/* Reset button-like styling for navigation items */
:root[data-theme="enterprise"] nav button,
:root[data-theme="enterprise"] [class*="sidebar"] button,
:root[data-theme="enterprise"] [class*="Sidebar"] button,
:root[data-theme="enterprise"] [class*="nav"] button,
:root[data-theme="enterprise"] [class*="Nav"] button,
:root[data-theme="enterprise"] [class*="menu"] button,
:root[data-theme="enterprise"] [class*="Menu"] button {
  /* Preserve original display/flex properties */
  display: flex !important;
  align-items: center !important;
  justify-content: flex-start !important;
  gap: var(--space-sm, 0.5rem) !important;
  width: 100% !important;
  text-align: left !important;

  /* Enterprise styling but layout-friendly */
  padding: var(--space-sm, 0.5rem) var(--space-md, 1rem);
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-normal);
  transition: all var(--transition-fast);
  cursor: pointer;
}

:root[data-theme="enterprise"] nav button:hover,
:root[data-theme="enterprise"] [class*="sidebar"] button:hover,
:root[data-theme="enterprise"] [class*="Sidebar"] button:hover,
:root[data-theme="enterprise"] [class*="nav"] button:hover,
:root[data-theme="enterprise"] [class*="Nav"] button:hover {
  background: var(--sidebar-item-hover, rgba(0, 0, 0, 0.04));
  color: var(--color-text-primary);
}

:root[data-theme="enterprise"] nav button.active,
:root[data-theme="enterprise"] [class*="sidebar"] button.active,
:root[data-theme="enterprise"] [class*="Sidebar"] button.active,
:root[data-theme="enterprise"] [class*="nav"] button.active,
:root[data-theme="enterprise"] [class*="Nav"] button.active {
  background: var(--sidebar-item-active, rgba(0, 120, 212, 0.1));
  color: var(--sidebar-text-active, var(--primitive-blue-500));
  font-weight: var(--font-weight-semibold);
}

/* ═══════════════════════════════════════════════════════════════════════
 * FIX 2: Link Elements - Preserve Inline Flow
 * ═══════════════════════════════════════════════════════════════════════ */

:root[data-theme="enterprise"] a {
  color: var(--color-text-link, var(--primitive-blue-500));
  text-decoration: none;
  transition: color var(--transition-fast);
}

:root[data-theme="enterprise"] a:hover {
  color: var(--color-text-link-hover, var(--primitive-blue-600));
  text-decoration: underline;
}

/* Navigation links should NOT have underline */
:root[data-theme="enterprise"] nav a,
:root[data-theme="enterprise"] [class*="sidebar"] a,
:root[data-theme="enterprise"] [class*="Sidebar"] a,
:root[data-theme="enterprise"] [class*="menu"] a,
:root[data-theme="enterprise"] [class*="Menu"] a {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  color: var(--color-text-secondary);
  text-decoration: none !important;
  border-radius: var(--radius-md);
  transition: all var(--transition-fast);
}

:root[data-theme="enterprise"] nav a:hover,
:root[data-theme="enterprise"] [class*="sidebar"] a:hover,
:root[data-theme="enterprise"] [class*="Sidebar"] a:hover {
  background: var(--sidebar-item-hover, rgba(0, 0, 0, 0.04));
  color: var(--color-text-primary);
  text-decoration: none !important;
}

:root[data-theme="enterprise"] nav a.active,
:root[data-theme="enterprise"] [class*="sidebar"] a.active,
:root[data-theme="enterprise"] [class*="Sidebar"] a.active {
  background: var(--sidebar-item-active, rgba(0, 120, 212, 0.1));
  color: var(--sidebar-text-active, var(--primitive-blue-500));
  font-weight: var(--font-weight-semibold);
}

/* ═══════════════════════════════════════════════════════════════════════
 * FIX 3: Tab Buttons - Preserve Horizontal Layout
 * ═══════════════════════════════════════════════════════════════════════ */

:root[data-theme="enterprise"] [class*="tab"] button,
:root[data-theme="enterprise"] [class*="Tab"] button,
:root[data-theme="enterprise"] .tabs button {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: var(--space-xs);
  padding: var(--space-sm) var(--space-lg);
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  border-radius: 0;
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
  transition: all var(--transition-fast);
  cursor: pointer;
}

:root[data-theme="enterprise"] [class*="tab"] button:hover,
:root[data-theme="enterprise"] [class*="Tab"] button:hover,
:root[data-theme="enterprise"] .tabs button:hover {
  background: rgba(0, 0, 0, 0.02);
  color: var(--color-text-primary);
  border-bottom-color: var(--color-border-primary);
}

:root[data-theme="enterprise"] [class*="tab"] button.active,
:root[data-theme="enterprise"] [class*="Tab"] button.active,
:root[data-theme="enterprise"] .tabs button.active {
  background: transparent;
  color: var(--color-accent-primary);
  border-bottom-color: var(--color-accent-primary);
  font-weight: var(--font-weight-semibold);
}

/* ═══════════════════════════════════════════════════════════════════════
 * FIX 4: Icon Buttons - Preserve Square/Circular Shape
 * ═══════════════════════════════════════════════════════════════════════ */

:root[data-theme="enterprise"] button[class*="icon"],
:root[data-theme="enterprise"] [class*="icon-button"],
:root[data-theme="enterprise"] [class*="IconButton"] {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: auto;
  min-width: 2.5rem;
  height: 2.5rem;
  padding: var(--space-sm);
  background: transparent;
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  transition: all var(--transition-fast);
}

:root[data-theme="enterprise"] button[class*="icon"]:hover,
:root[data-theme="enterprise"] [class*="icon-button"]:hover,
:root[data-theme="enterprise"] [class*="IconButton"]:hover {
  background: var(--color-bg-hover);
  border-color: var(--color-accent-primary);
  color: var(--color-accent-primary);
}

/* Circular icon buttons */
:root[data-theme="enterprise"] button[class*="icon"][class*="round"],
:root[data-theme="enterprise"] button[class*="icon"][class*="circle"] {
  border-radius: var(--radius-full);
}

/* ═══════════════════════════════════════════════════════════════════════
 * FIX 5: Flex/Grid Container Preservation
 * ═══════════════════════════════════════════════════════════════════════ */

/* Ensure navigation containers maintain flex/grid layout */
:root[data-theme="enterprise"] nav,
:root[data-theme="enterprise"] [class*="sidebar"],
:root[data-theme="enterprise"] [class*="Sidebar"],
:root[data-theme="enterprise"] [class*="navigation"],
:root[data-theme="enterprise"] [class*="Navigation"] {
  /* These should NOT be overridden by theme */
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

/* Tab containers should be horizontal */
:root[data-theme="enterprise"] [class*="tabs"],
:root[data-theme="enterprise"] [class*="Tabs"] {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
  gap: 0 !important;
  border-bottom: 1px solid var(--color-border-primary);
}

/* ═══════════════════════════════════════════════════════════════════════
 * FIX 6: Badge/Pill Elements - Preserve Inline Display
 * ═══════════════════════════════════════════════════════════════════════ */

:root[data-theme="enterprise"] .badge,
:root[data-theme="enterprise"] [class*="badge"],
:root[data-theme="enterprise"] [class*="Badge"],
:root[data-theme="enterprise"] .pill,
:root[data-theme="enterprise"] [class*="pill"] {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: var(--space-xs);
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
  font-weight: var(--font-weight-medium);
  line-height: 1;
  white-space: nowrap;
}

/* ═══════════════════════════════════════════════════════════════════════
 * FIX 7: Header/Toolbar - Preserve Horizontal Layout
 * ═══════════════════════════════════════════════════════════════════════ */

:root[data-theme="enterprise"] header,
:root[data-theme="enterprise"] [class*="header"],
:root[data-theme="enterprise"] [class*="Header"],
:root[data-theme="enterprise"] [class*="toolbar"],
:root[data-theme="enterprise"] [class*="Toolbar"] {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
  justify-content: space-between !important;
  gap: var(--space-md);
  padding: var(--space-md) var(--space-lg);
  background: var(--header-bg, #ffffff);
  border-bottom: 1px solid var(--header-border, rgba(0, 0, 0, 0.08));
}

/* ═══════════════════════════════════════════════════════════════════════
 * FIX 8: Dropdown Menus - Preserve Vertical Layout
 * ═══════════════════════════════════════════════════════════════════════ */

:root[data-theme="enterprise"] [class*="dropdown"],
:root[data-theme="enterprise"] [class*="Dropdown"],
:root[data-theme="enterprise"] [class*="menu"][class*="vertical"] {
  display: flex !important;
  flex-direction: column !important;
  gap: 0 !important;
  padding: var(--space-xs);
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
}

:root[data-theme="enterprise"] [class*="dropdown"] button,
:root[data-theme="enterprise"] [class*="Dropdown"] button {
  display: flex !important;
  align-items: center !important;
  justify-content: flex-start !important;
  width: 100% !important;
  text-align: left !important;
  padding: var(--space-sm) var(--space-md);
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  transition: background var(--transition-fast);
}

:root[data-theme="enterprise"] [class*="dropdown"] button:hover,
:root[data-theme="enterprise"] [class*="Dropdown"] button:hover {
  background: var(--color-bg-hover);
  color: var(--color-text-primary);
}

/* ═══════════════════════════════════════════════════════════════════════
 * FIX 9: Breadcrumbs - Preserve Horizontal Flow
 * ═══════════════════════════════════════════════════════════════════════ */

:root[data-theme="enterprise"] [class*="breadcrumb"],
:root[data-theme="enterprise"] [class*="Breadcrumb"] {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
  gap: var(--space-xs);
  flex-wrap: wrap;
}

:root[data-theme="enterprise"] [class*="breadcrumb"] a,
:root[data-theme="enterprise"] [class*="Breadcrumb"] a {
  display: inline !important;
  padding: 0 !important;
  background: none !important;
  color: var(--color-text-link);
}

:root[data-theme="enterprise"] [class*="breadcrumb"] a:hover,
:root[data-theme="enterprise"] [class*="Breadcrumb"] a:hover {
  color: var(--color-text-link-hover);
  text-decoration: underline !important;
}

/* ═══════════════════════════════════════════════════════════════════════
 * FIX 10: Action Buttons - Preserve Original Styles for CTAs
 * ═══════════════════════════════════════════════════════════════════════ */

/* Primary action buttons should have full Enterprise styling */
:root[data-theme="enterprise"] button[class*="primary"],
:root[data-theme="enterprise"] button[class*="Primary"],
:root[data-theme="enterprise"] [class*="btn-primary"],
:root[data-theme="enterprise"] [class*="action-button"] {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-lg);
  background: var(--button-bg-primary, var(--primitive-blue-500));
  border: none;
  border-radius: var(--radius-md);
  color: #ffffff;
  font-weight: var(--font-weight-semibold);
  box-shadow: var(--button-shadow, var(--shadow-sm));
  transition: all var(--transition-fast);
  cursor: pointer;
}

:root[data-theme="enterprise"] button[class*="primary"]:hover,
:root[data-theme="enterprise"] button[class*="Primary"]:hover,
:root[data-theme="enterprise"] [class*="btn-primary"]:hover {
  background: var(--button-bg-primary-hover, var(--primitive-blue-600));
  box-shadow: var(--button-shadow-hover, var(--shadow-md));
  transform: translateY(-1px);
}

/* Secondary buttons */
:root[data-theme="enterprise"] button[class*="secondary"],
:root[data-theme="enterprise"] button[class*="Secondary"] {
  background: transparent;
  border: 1px solid var(--color-border-primary);
  color: var(--color-text-primary);
}

:root[data-theme="enterprise"] button[class*="secondary"]:hover,
:root[data-theme="enterprise"] button[class*="Secondary"]:hover {
  background: var(--color-bg-hover);
  border-color: var(--color-accent-primary);
  color: var(--color-accent-primary);
}

/* ═══════════════════════════════════════════════════════════════════════
 * ACCESSIBILITY - Focus States
 * ═══════════════════════════════════════════════════════════════════════ */

:root[data-theme="enterprise"] button:focus-visible,
:root[data-theme="enterprise"] a:focus-visible {
  outline: 2px solid var(--color-accent-primary);
  outline-offset: 2px;
}

/* ═══════════════════════════════════════════════════════════════════════
 * RESPONSIVE ADJUSTMENTS
 * ═══════════════════════════════════════════════════════════════════════ */

@media (max-width: 768px) {
  /* Sidebars may collapse on mobile */
  :root[data-theme="enterprise"] [class*="sidebar"],
  :root[data-theme="enterprise"] [class*="Sidebar"] {
    width: 100%;
  }

  /* Tab buttons may stack on mobile */
  :root[data-theme="enterprise"] [class*="tabs"].mobile-stack,
  :root[data-theme="enterprise"] [class*="Tabs"].mobile-stack {
    flex-direction: column !important;
  }
}
