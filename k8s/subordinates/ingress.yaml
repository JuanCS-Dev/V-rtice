---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: subordinates-ingress
  namespace: vertice-subordinates
  labels:
    app: subordinates
  annotations:
    kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    nginx.ingress.kubernetes.io/rate-limit: "100"
    nginx.ingress.kubernetes.io/proxy-body-size: "10m"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "300"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "300"
spec:
  tls:
    - hosts:
        - vertice.dev
        - "*.vertice.dev"
      secretName: vertice-tls
  rules:
    # PENELOPE - Wisdom & Healing
    - host: penelope.vertice.dev
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: penelope
                port:
                  number: 8154

    # MABA - Browser Agent
    - host: maba.vertice.dev
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: maba
                port:
                  number: 8152

    # MVP - Vision Protocol
    - host: mvp.vertice.dev
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: mvp
                port:
                  number: 8153

---
# Internal service mesh ingress (optional - if using Istio/Linkerd)
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: subordinates-internal
  namespace: vertice-subordinates
  labels:
    app: subordinates
    scope: internal
  annotations:
    kubernetes.io/ingress.class: nginx-internal
    nginx.ingress.kubernetes.io/whitelist-source-range: 10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
spec:
  rules:
    - host: penelope.vertice.internal
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: penelope
                port:
                  number: 8154

    - host: maba.vertice.internal
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: maba
                port:
                  number: 8152

    - host: mvp.vertice.internal
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: mvp
                port:
                  number: 8153

# ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)
#
# Co-Authored-By: Claude <noreply@anthropic.com>
